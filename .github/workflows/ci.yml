# å·¥ä½œæµåç§°ï¼Œä¸è®¾ç½®çš„è¯é»˜è®¤å–é…ç½®æ–‡ä»¶å
name: Build and Deploy
# æŒ‡å®šè§¦å‘ workflow çš„æ¡ä»¶
# æŒ‡å®šè§¦å‘äº‹ä»¶æ—¶ï¼Œå¯ä»¥é™å®šåˆ†æ”¯æˆ–æ ‡ç­¾
# å½“å‰æ˜¯ åªæœ‰ masteråˆ†æ”¯ä¸Šè§¦å‘ push äº‹ä»¶æ—¶æ‰æ‰§è¡Œå·¥ä½œæµä»»åŠ¡
on: 
  push:
    branches:
      - master
    # è¿™é‡Œæ˜¯ç”¨æ¥æŒ‡å®šå“ªä¸ªæ–‡ä»¶æ›´æ”¹ï¼Œæ‰ä¼šè§¦å‘çš„
    # paths:
    #   - 'src/**'
    # ä¸‹åˆ—æ–‡ä»¶çš„å˜æ›´ä¸è§¦å‘éƒ¨ç½²ï¼Œå¯ä»¥è‡ªè¡Œæ·»åŠ 
    paths-ignore:
      - README.md
      - LICENSE
# å·¥ä½œæµæ‰§è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡
jobs:
  # ä»»åŠ¡åç§°
  build-and-deploy:
    # ä»»åŠ¡è¿è¡Œçš„å®¹å™¨ç±»å‹ï¼ˆè™šæ‹Ÿæœºç¯å¢ƒï¼‰
    runs-on: ubuntu-latest
    # ä»»åŠ¡æ‰§è¡Œçš„æ­¥éª¤
    steps:
      # æ­¥éª¤åç§°
      - name: Checkout ğŸ›ï¸
        # ä½¿ç”¨çš„æ“ä½œ actionsï¼Œå¯ä»¥ä½¿ç”¨å…¬å…±ä»“åº“ï¼Œæœ¬åœ°ä»“åº“ï¼Œåˆ«äººçš„ä»“åº“çš„action
        # æ‹‰å–ä»£ç 
        uses: actions/checkout@v3

      # ä½¿ç”¨pnpmæ‰“åŒ…  
      - name: Use pnpm ğŸ“¦
        uses: pnpm/action-setup@v2
        with:
          version: 8

      # æ­¤ç¤ºä¾‹é¡¹ç›®ä½¿ç”¨pnpmæ„å»ºï¼Œå¹¶å°†ç»“æœè¾“å‡ºåˆ°â€œdistâ€æ–‡ä»¶å¤¹ã€‚å°†å…¶æ›¿æ¢ä¸ºä½ ç”Ÿæˆé¡¹ç›®æ‰€éœ€çš„å‘½ä»¤ï¼Œè‹¥ä½ çš„ç½‘ç«™æ˜¯é¢„ç”Ÿæˆçš„ï¼Œåˆ™å®Œå…¨å¯ä»¥åˆ é™¤æ­¤æ­¥éª¤ã€‚
      - name: Install and Build ğŸ”§
        run: |
          pnpm install
          pnpm build

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          # æŒ‡å®šéƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ gh-pages åˆ†æ”¯
          branch: gh-pages
          # å­˜å‚¨åº“ä¸­è¦éƒ¨ç½²çš„æ–‡ä»¶å¤¹ã€‚
          # è¯¥æ­¥éª¤ä¼šå°†é¡¹ç›®ä¸­ folder æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æ¨é€åˆ° BRANCH åˆ†æ”¯ï¼Œä½œä¸ºGithub Pages éƒ¨ç½²çš„å†…å®¹ã€‚
          # Viteé»˜è®¤æ‰“åŒ…åˆ° dist ç›®å½•
          folder: dist